<div class="produto-form-container">
  <div class="form-card">
    <div class="form-header">
      <h1>{{ isEditMode ? 'Editar Produto' : 'Novo Produto' }}</h1>
    </div>

    <div *ngIf="mensagemErro" class="message error">{{ mensagemErro }}</div>

    <form [formGroup]="produtoForm" (ngSubmit)="salvar()">
      <div class="form-group">
        <label for="nome">Nome do Produto</label>
        <input id="nome" type="text" formControlName="nome" placeholder="Ex: Arroz Integral" />
      </div>

      <div class="form-group">
        <label for="unidadeMedida">Unidade de Medida</label>
        <select id="unidadeMedida" formControlName="unidadeMedida">
          <option value="">Selecione...</option>
          <option value="KILO">Quilograma (KG)</option>
          <option value="GRAMA">Grama (G)</option>
          <option value="UNIDADE">Unidade</option>
        </select>
      </div>

      <div class="form-group checkbox-group">
        <input id="ehPesavel" type="checkbox" formControlName="ehPesavel" />
        <label for="ehPesavel">Produto Pesável</label>
      </div>

      <div class="form-group" *ngIf="produtoForm.get('ehPesavel')?.value">
        <label for="precoKg">Preço por KG *</label>
        <input id="precoKg" type="number" formControlName="precoKg" placeholder="0.00" step="0.01" />
      </div>

      <div class="form-group" *ngIf="!produtoForm.get('ehPesavel')?.value">
        <label for="precoUnidade">Preço por Unidade *</label>
        <input id="precoUnidade" type="number" formControlName="precoUnidade" placeholder="0.00" step="0.01" />
      </div>

      <div class="form-group">
        <label for="dataValidade">Data de Validade</label>
        <input id="dataValidade" type="date" formControlName="dataValidade" />
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-submit" [disabled]="produtoForm.invalid || loading">
          {{ loading ? 'Salvando...' : (isEditMode ? 'Atualizar' : 'Cadastrar') }}
        </button>
        <button type="button" class="btn-cancel" (click)="cancelar()">Cancelar</button>
      </div>
    </form>
  </div>
</div>